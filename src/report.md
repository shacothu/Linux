## Part 1. Установка ОС
- Версия системы:

![](part1.png)

```
cat /etc/issue```

##Part 2. Создание пользователя
- Создание пользователя:

![](part2.1.png)

```
sudo adduser user1
```
- Чтение логов:

![](part2.11.png)

```
sudo usermod -aG adm user1
```

- cat /etc/passwd

![](part2.2.png)

```
cat /etc/passwd
```

##Part 3. Настройка сети ОС
- Изменение имени хоста

![](part3.1.png)

```
sudo hostname user-1
```
Проверяю есть ли изменения(их не было и я изменил сам)

```
cat /etc/hostname
```

```
sudo vim /etc/hosts
```

![](part3.11.png)

Меняю строку 127.0.0.1 shacothu -> 127.0.0.1 user-1. Сохраняю и пишу

 ```
 sudo reboot
 ```
 - Установка временной зоны, соответствующей текущему местоположению. В Казани время по Москве
 
 ![](part3.2.png)
 
```
sudo timedatectl set-timezone Europe/Moscow
```

```
timedatectl 
```

- Вывод названий сетевых интерфейсов с помощью консольной команды

![](part3.3.png)

```
ip link show
```
Наличие интерфейса lo(loopback) объяснется тем, что присутствует связь компьютера с самим собой, т.е. данные, передаваемые этим компьютером, принимаются этим же компьютером)

- IP адрес устройства от DHCP сервера

![](part3.4.png)

```
hostname -I
```

- Определение внешнего ip-адреса шлюза (ip)

![](part3.5.png)

```
curl icanhazip.com
```

DHCP - Dynamic Host Configuration Protocol — протокол динамической настройки узла, автоматически предоставляет IP адреса и другие настройки сети

- Определение внутреннего ip-адреса шлюза (gw)

![](part3.6.png)

```
ip route
```
- Установление статичных сетевых настроек 

Открытие файла:

![](part3.7.png)

```
sudo vim /etc/netplan/*.yaml
```

После изменений:

![](part3.8.png)

- Применение изменений и перезапуск виртуальной машины

![](part3.9.png)

```
sudo netplan apply
```

```
reboot
```

- Пинг хостов 1.1.1.1 и ya.ru

![](part3.10.png)

```
ping 1.1.1.1
```

![](part3.101.png)

```
ping ya.ru
```

##Part 4. Обновление ОС
Обновление ОС

```
sudo apt-get upgrade
```

После обновления 

![](part4.png)

##Part 5. Использовние команды sudo

Команда **sudo** предоставляет возможность пользователям выполнять команды от имени суперпользователя root, либо других пользователей, т.е. использование sudo позволяет выполнять привилегированные команды обычным пользователям без необходимости ввода пароля суперпользователя root

Необходимо сменить пароль для пользователя, созданного в Part 2

```
sudo passwd user1
```

Затем добавить пользователя в группу с привилегиями sudo

```
sudo usermod -aG sudo user1
```

![](part5.png)

Проверяю возможность использования sudo, переключившись на нового пользователя и поменяв название хоста

![](part5.1.png)

##Part 6. Установка и настройка службы времени

- Установка службы автоматической синхронизации времени

![](part6.png)

(уже установлено)

- Вывод команды

![](part6.1.png)

```
timedatectl show
```
Синхронизация присутствует(наличие NTPSynchronized=yes)

##Part 7. Установка и использование текстовых редакторов

Команды для установки:

```
sudo apt install nano
```

```
sudo apt install vim
```

```
sudo apt install mcedit
```

- **NANO**

![](part7nano.png)

Для выхода с сохранением изменений необходимо нажать Ctrl+O, затем подтвердить то, что название файла остается неизменным (Enter), либо изменить его и так же подтвердить изменения (Enter), затем выйти(Ctrl+X)

Для выхода без сохранения изменений Ctrl+X, затем Enter

- **VIM**

![](part7vim.png)

Для выхода с сохранением изменений необходимо нажать esc и затем вбить :wq и нажать enter

Для выхода без сохранения изменений нажать esc вбить :q! и нажать Enter

- **MCEDIT**

![](part7mcedit.png)

Для выхода с сохранением изменений необходимо использовать клавиши F2(сохранение) и затем F10(выход) 

Для выхода без сохранения изменений F10, затем стрелками переместится на "No" и нажать Enter

**Поиск и замена слова**

- **NANO**

![](part7nano1.png)

Ctrl + W для поиска начиная от курсора к концу файла; Ctrl + Q для поиска начиная от курсора к началу файла. Курсор переместится на слово, которое ищут после нажатия на Enter

![](part7.nano2.png)

Для замены необходимо использовать сочетание клавиш Ctrl+\\\, ввести слово, которое будет заменено и затем слово, которым заменяем. После замены повится напись "Replaced 1 occurrence"

- **VIM**

![](part7.vim1.png)

Для поиска нажать  esc, чтобы переключиться в командный режим, затем ввести  / и свой паттерн


![](part7.vim2.png)

Для замены слова необходимо ввести комманду :s/ затем ввести слово, которое необходимо заменить и через / то, на что заменяем

- **MCEDIT**

![](part7mcedit1.png)

Для поиска нажать клавишу F7 и ввести строку для поиска

![](part7mcedit2.png)

Для замены нажать клавишу F4 ввести заменяемую строку и текст для замены

##Part 8. Установка и базовая настройка сервиса SSHD

- Установка службы ssh 

```
sudo apt install openssh-server
```

- Добавление автостарта службы при загрузке системы 

```
sudo systemctl enable ssh
```

![](part8.png)

- Перенастройка службы SSHd на порт 2022

![](part8.2.png)

- Наличие процесса sshd

```
ps -e | grep sshd
```

![](part8.3.png)

Команда ps является очень гибким инструментом для определения работающих в системе программ и оценки используемых ими ресурсов. Ключ -е используется для отображения всех процессов. Утилита grep используется для того, чтобы отобрать нужные процессы по определенному критерию (в данном случае процесс sshd)

- Установка netstat

```
sudo apt install net-tools
```

- Вывод команды netstat -tan

![](part8.4.png)

Ключ -n показывает номерные адреса вместо того, чтобы пытаться определить символические.  
Ключ -а показывает все сокеты: и прослушиваемые, и нет.  
Ключ -t показывает TCP-порты.

**Значение столбцов**  
Proto - протокол, используемый сокетом.  
Recv-Q - количество байтов, не скопированных пользовательской программой, подключенной к этому сокету.  
Send-Q - количество неподтвержденных байтов удаленного хоста  
Local Address - локальный адрес (имя локального хоста) и номер порта сокета. Если не указана опция -n, адрес сокета разрешается в соответствии с полным именем хоста (FQDN), а номер порта преобразуется в соответствующее имя службы.  
Foreign Address - удаленный адрес (имя удаленного хоста) и номер порта сокета.  
State - состояние сокета. LISTEN означает ожидание входящих соединений.  
  
**0.0.0.0** в колонке значит, что на данном порту слушаются все сетевые интерфейсы.

##Part 9. Установка и использование утилит top, htop

- Вывод команды **top**

![](part9.png)

uptime - 58 мин.

количество авторизованных пользователей - 1

общую загрузку системы - 0,00, 0,00, 0,00

общее количество процессов - 103

загрузку cpu - 0.3

загрузку памяти - 158,0/1971,4


Использвание команд top -o %MEM и top -o %CPU, чтобы узнать pid процессов, занимающих больше времени и памяти

![](part9.1.png)

pid процесса занимающего больше всего памяти - 677

![](part9.2.png)

pid процесса, занимающего больше всего процессорного времени - 484, 1

- Вывод команды **htop**

Сортировка по PID

![](part9.3.png)

Сортировка по PERCENT_CPU

![](part9.4.png)

Сортировка по PERCENT_MEM

![](part9.5.png)

Сортировка по TIME

![](part9.6.png)

Отфильтрованный вывод для процесса sshd

![](part9.7.png)

Процесс syslog, найденный, используя поиск

![](part9.8.png)

Добавленный вывод hostname, clock, uptime

![](part9.9.png)

##Part 10. Использование утилиты fdisk

![](part10.png)

Название жесткого диска - /dev/sda

Размер - 25G

Количество секторов - 52428800

![](part101.png)

```
sudo swapon --show
```

Размер swap - 2G 

##Part 11. Использование утилиты df

- **Команда df**

![](part11.png)

Размер раздела - 11758760

Размер занятого пространства - 5047968

Размер свободного пространства - 6091684

Процент использования - 46%

Единица измерения в выводе - килобайты

- **Команда df -Th**

![](part11.1.png)

Размер раздела - 12G

Размер занятого пространства - 4,9

Размер свободного пространства - 5,9

Процент использования - 46%

Тип файловой системы для раздела - ext4

##Part 12. Использование утилиты du

- Размер папок

![](part12.png)

```
sudo du -sh /var/log /var /home
```

```
sudo du -s --block-size=1 /var/log /var /home
```

- Размер всего содержимого в /var/log

![](part12.1.png)

```
du -h /var/log/*
```

##Part 13. Установка и использование утилиты ncdu

```
sudo apt install ncdu
```

![](part13.png)

![](part13.1.png)

##Part 14. Работа с системными журналами

```
vim /var/log/dmesg
vim /var/log/syslog
vim /var/log/auth.log
```
Время последней успешной авторизации - 07:01:49

Имя пользователя - shacothu

Метод входа - LOGIN

Перезапуск службы sshd:

```
sudo systemctl restart ssh
tail /var/log/syslog
```

![](part14.png)

##Part 15. Использование планировщика заданий CRON

Использование планировщика заданий для запуска команды uptime каждые две минуты:

```
crontab -e
```

![](part15.png)

Строчки о выполнении:

![](part15.1.png)

Удаление из планировщика заданий и просмотр текущих заданий для CRON:

```
crontab -r
crontab -l
```

![](part15.2.png)

